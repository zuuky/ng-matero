<mat-card-content>
  <form [formGroup]="reactiveForm" class="form-field-full">
    <div class="matero-row matero-col p-l-48 " fxLayout="row wrap" fxLayoutAlign="start center">
      <ng-container *ngFor="let item of models">
        <!-- input -->
        <mat-form-field *ngIf="item.fieldType === 'input'" class="m-r-32" fxFlex="30"
                        fxFlex.lt-lg="45" fxFlex.lt-sm="100">
          <label>
            <input matInput [formControlName]="item.field" [id]="item.field" [placeholder]="item.header"
                   [readonly]="item.readonly" name="{{item.field}}"
            />
          </label>
          <button mat-button *ngIf="reactiveForm.get(item.field) && reactiveForm.get(item.field).value" matSuffix
                  mat-icon-button aria-label="Clear"
                  (click)="reactiveForm.get(item.field).reset()">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
        <!-- textarea -->
        <mat-form-field *ngIf="item.fieldType === 'textarea'" class="m-r-32" fxFlex="30"
                        fxFlex.lt-lg="45" fxFlex.lt-sm="100">
          <label>
              <textarea matInput [formControlName]="item.field" [id]="item.field"
                        [placeholder]="item.header" [readonly]="item.readonly" name="{{item.field}}"
              ></textarea>
          </label>
          <button mat-button *ngIf="reactiveForm.get(item.field) && reactiveForm.get(item.field).value" matSuffix
                  mat-icon-button aria-label="Clear"
                  (click)="reactiveForm.get(item.field).reset()">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
        <!-- datetime data month -->
        <mat-form-field
          *ngIf="item.fieldType === 'datetime' || item.fieldType === 'date' || item.fieldType === 'month'"
          class="m-r-32" fxFlex="30" fxFlex.lt-lg="45" fxFlex.lt-sm="100">
          <mat-datetimepicker-toggle [for]="dtpicker" matSuffix></mat-datetimepicker-toggle>
          <mat-datetimepicker #dtpicker type="{{item.fieldType}}" timeInterval="1"
                              (selectedChanged)="formService.dateFormatEvent(item.fieldType,$event)"
                              [touchUi]="platform.ANDROID || platform.IOS" mode="auto"></mat-datetimepicker>
          <label>
            <input matInput [formControlName]="item.field" [matDatetimepicker]="dtpicker"
                   (click)="dtpicker.open()"
                   [id]="item.field" name="{{item.field}}"
                   [placeholder]="item.header"
                   [readonly]="item.readonly">
          </label>
          <button mat-button *ngIf="reactiveForm.get(item.field) && reactiveForm.get(item.field).value" matSuffix
                  mat-icon-button aria-label="Clear"
                  (click)="reactiveForm.get(item.field).reset()">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
        <!-- select -->
        <mat-form-field
          *ngIf="item.fieldType === 'select' && item.selectOptions && item.selectOptions.length > 0"
          class="m-r-32" fxFlex="30" fxFlex.lt-lg="45" fxFlex.lt-sm="100">
          <mat-select [formControlName]="item.field" [id]="item.field" [placeholder]="item.header"
                      [multiple]="item.multiple">
            <ng-container *ngFor="let item of item.selectOptions">
              <mat-option value="{{item.value}}">{{item.key}}</mat-option>
            </ng-container>
          </mat-select>
          <button mat-button *ngIf="reactiveForm.get(item.field) && reactiveForm.get(item.field).value" matSuffix
                  mat-icon-button aria-label="Clear"
                  (click)="reactiveForm.get(item.field).reset()">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
        <!-- autocomplete -->
        <mat-form-field *ngIf="item.fieldType === 'autocomplete' && item.autocompleteOptions &&
          item.autocompleteOptions.length > 0" class="m-r-32" fxFlex="30" fxFlex.lt-lg="45" fxFlex.lt-sm="100">
          <label>
            <input matInput [formControlName]="item.field" [id]="item.field" [placeholder]="item.header"
                   [readonly]="item.readonly" name="{{item.field}}"
                   [matAutocomplete]="auto"/>
          </label>
          <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
            <ng-container *ngFor="let option of item.autocompleteOptions">
              <mat-option [value]="option">{{option}}</mat-option>
            </ng-container>
          </mat-autocomplete>
          <button mat-button *ngIf="reactiveForm.get(item.field) && reactiveForm.get(item.field).value" matSuffix
                  mat-icon-button aria-label="Clear"
                  (click)="reactiveForm.get(item.field).reset()">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
        <!-- tree -->
        <mat-form-field *ngIf="item.fieldType === 'tree'" class="m-r-32" fxFlex="30" fxFlex.lt-lg="45"
                        fxFlex.lt-sm="100">
          <label>
            <input matInput [formControlName]="item.field" [id]="item.field" [placeholder]="item.header"
                   [readonly]="item.readonly" name="{{item.field}}"
                   (click)="item.overlayOpen = !item.overlayOpen"
                   cdkOverlayOrigin #overlayOrigin="cdkOverlayOrigin"
            />
          </label>
          <app-select-tree #tree [overlayOrigin]="overlayOrigin" [model]="item"
                           (selections)="formService.buildTreeValue(reactiveForm,item,$event)"></app-select-tree>
          <button mat-button *ngIf="reactiveForm.get(item.field) && reactiveForm.get(item.field).value" matSuffix
                  mat-icon-button aria-label="Clear"
                  (click)="reactiveForm.get(item.field).reset();tree.checklistSelection.clear();">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </ng-container>
    </div>
  </form>
</mat-card-content>
<mat-action-row>
  <div fxLayoutAlign="end center">
    <button mat-button color="primary" class="m-r-16"
            (click)="selectEvent.emit(reactiveForm.value)"
            [disabled]="reactiveForm.invalid">
      <mat-icon class="mat-icon notranslate material-icons mat-icon-no-color">search
      </mat-icon>
    </button>
    <button color="primary" mat-button class="m-r-16" fxHide.lt-lg [disabled]="reactiveForm.invalid"
            (click)="downloadEvent.emit(reactiveForm.value)">
      <mat-icon class="mat-icon notranslate material-icons mat-icon-no-color" color="primary">cloud_download
      </mat-icon>
    </button>
    <button color="primary" mat-button class="m-r-16" (click)="reset()">
      Reset
    </button>
  </div>
</mat-action-row>
